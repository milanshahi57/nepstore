{% extends 'base.html' %}

{% block content %}
<div class="product-container">
    <div class="product-left">
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="main-image">
        <div class="image-gallery">
            {% for image in product.images.all %}
                <img src="{{ image.url }}" alt="Gallery Image">
            {% endfor %}
        </div>
    </div>

    <div class="product-right">
        <h1>{{ product.name }}</h1>
        <div class="rating">
            ⭐⭐⭐⭐⭐ <span>({{ product.reviews.count }} Ratings)</span>
        </div>
        <p><strong>Brand:</strong> {{ product.brand }}</p>
        <p class="price">Rs. {{ product.price }}</p>
        <p class="old-price">Rs. {{ product.old_price }} <span class="discount">-{{ product.discount }}%</span></p>

        <label>Quantity:</label>
        <div class="quantity">
            <button class="minus">-</button>
            <input type="number" value="1" min="1" id="quantity-input">
            <button class="plus">+</button>
        </div>

        <div class="buttons">
            <a href="{% url 'add_to_cart' product.id %}" class="add-to-cart">Add to Cart</a>
            <a href="{% url 'cart' %}" class="buy-now">Buy Now</a>
        </div>

        <h2>Product Details</h2>
        <p>{{ product.description }}</p>
    </div>
</div>

<style>
    .product-container {
        display: flex;
        gap: 20px;
        padding: 20px;
        margin-top:100px;
    }
    .product-left {
        flex: 1;
    }
    .main-image {
        width: 100%;
        height: auto;
        border-radius: 10px;
    }
    .image-gallery img {
        width: 60px;
        margin: 5px;
        cursor: pointer;
    }
    .product-right {
        flex: 1;
    }
    .price {
        font-size: 24px;
        color: #ff5722;
    }
    .old-price {
        text-decoration: line-through;
        color: gray;
    }
    .discount {
        color: green;
    }
    .quantity {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .quantity input {
        width: 50px;
        text-align: center;
        font-size: 16px;
        padding: 5px;
    }
    .quantity button {
        width: 30px;
        height: 30px;
        font-size: 18px;
        border: none;
        background: #ddd;
        cursor: pointer;
        border-radius: 5px;
    }
    .quantity button:hover {
        background: #ccc;
    }
    .buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }
    .buy-now, .add-to-cart {
        display: block;
        padding: 10px;
        text-align: center;
        border: none;
        font-size: 16px;
        cursor: pointer;
        text-decoration: none;
        color: white;
        border-radius: 5px;
    }
    .buy-now {
        background: #2196F3;
    }
    .add-to-cart {
        background: #FF9800;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const minusBtn = document.querySelector(".minus");
        const plusBtn = document.querySelector(".plus");
        const quantityInput = document.getElementById("quantity-input");

        minusBtn.addEventListener("click", function() {
            let currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
            }
        });

        plusBtn.addEventListener("click", function() {
            let currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
        });

        quantityInput.addEventListener("input", function() {
            if (quantityInput.value < 1 || isNaN(quantityInput.value)) {
                quantityInput.value = 1;
            }
        });
    });
</script>

{% endblock %}
